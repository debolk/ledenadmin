// Generated by CoffeeScript 1.6.2
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  Bolk.Page = (function(_super) {
    __extends(Page, _super);

    function Page(title) {
      Page.__super__.constructor.call(this, 'body');
      this.headerTemplate = this.header = this.container.find('#masthead');
      this.contents = this.container.find('#content');
      this.footer = this.container.find('#mastfoot');
      this._fillHeader(title);
    }

    Page.prototype._getHeaderTemplate = function() {
      return '<div id="branding">\
			<a href="#<%= route_home %>" data-route="<%= route_home %>">\
				<img src="//placehold.it/100x100.png">\
			</a>\
			<h1>Whiting</h1>\
		</div>\
		<form class="form-inline" id="search">\
			<div class="controls">\
				<input type="text" class="input-big" placeholder="Search...">\
			</div>\
			<div class="actions">\
				<a href="#/search/filter" data-route="/search/filter">Advanced filter</a> |\
				<a href="#/members/new" data-route="/members/new">Add member</a>\
			</div>\
		</form>\
		<div id="logout">\
			<a href="#/logout" data-route="/logout">\
				<img src="//placehold.it/100x100.png&text=logout">\
			</a>\
		</div>';
    };

    Page.prototype._fillHeader = function(title) {
      var key,
        _this = this;

      key = "header-" + (title.toLowerCase());
      return locache.async.get(key).finished(function(template) {
        _this.header.hide();
        if (!template) {
          template = _.template(_this._getHeaderTemplate(), {
            route_home: '/home',
            title: title
          });
          locache.async.set(key, template);
        }
        _this.header.html(template);
        return _this.header.fadeIn();
      });
    };

    Page.prototype._createActions = function(actions) {
      var action, result, templ, _i, _len;

      templ = '<a href="#<%= link %>" data-route="<%= link %>"><%= text %></a>';
      result = $('<ul></ul>');
      for (_i = 0, _len = actions.length; _i < _len; _i++) {
        action = actions[_i];
        result.append($('<li></li>').html(_.template(templ, action)));
      }
      return result;
    };

    Page.prototype.clear = function() {
      this.header.empty();
      return this.contents.empty();
    };

    return Page;

  })(Bolk.ViewCollection);

}).call(this);
